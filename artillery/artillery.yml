config:
  target: "http://172.23.0.220/"
  phases:
    - duration: 10
      arrivalRate: 1
  payload:
    path: "form_values.csv"
    fields:
      - "name"
      - "rut"
      - "motive"
      - "address"
  environments:
    low:
      phases:
        - duration: 60
          arrivalRate: 2
          rampTo: 10
    medium:
      phases:
        - duration: 30
          arrivalRate: 5
          rampTo: 10
        - duration: 60
          arrivalRate: 10
    high:
      phases:
        - duration: 30
          arrivalRate: 10
        - duration: 60
          arrivalRate: 15
          rampTo: 30
scenarios:
  - name: "Fill and send form"
    flow:
      - get:
         url: "/"
      - think: 3
      - get:
         url: "/nuevo"
      - think: 10
      - post:
         url: "/api/create"
         json:
          name: "{{name}}"
          rut: "{{rut}}"
          motive: "{{motive}}"
          address: "{{address}}"
         capture:
          json: $.id
          as: "id"
      - think: 5
      - get:
         url: "/validate/{{ id }}"
         ifTrue: "id"

